"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[684],{1684:(H,l,s)=>{s.r(l),s.d(l,{RespuestasModule:()=>z});var c=s(6895),p=s(2496),t=s(8274);let v=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-crear"]],decls:2,vars:0,template:function(e,r){1&e&&(t.TgZ(0,"p"),t._uU(1,"crear works!"),t.qZA())}}),n})(),x=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editar"]],decls:2,vars:0,template:function(e,r){1&e&&(t.TgZ(0,"p"),t._uU(1,"editar works!"),t.qZA())}}),n})(),Z=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-eliminar"]],decls:2,vars:0,template:function(e,r){1&e&&(t.TgZ(0,"p"),t._uU(1,"eliminar works!"),t.qZA())}}),n})();var a=s(433),u=s(2340),A=s(7948),U=s(805),C=s(9219),b=s(2709),m=s(5593),g=s(2453),f=s(3054),h=s(3388);const y=["fileUpload"];function T(n,o){if(1&n&&(t.TgZ(0,"div",32)(1,"a",33),t._UZ(2,"button",34),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.hYB("href","",e.API_URI,"/media/",e.solicitud[0].anexo,"",t.LSH)}}function _(n,o){if(1&n&&(t.TgZ(0,"div",32)(1,"a",33),t._UZ(2,"button",34),t.qZA()()),2&n){const e=t.oxw().$implicit,r=t.oxw(3);t.xp6(1),t.hYB("href","",r.API_URL_MEDIA,"",e.anexo,"",t.LSH)}}function I(n,o){if(1&n&&(t.TgZ(0,"div",37)(1,"div",5)(2,"div",6)(3,"span",38),t._UZ(4,"i",39),t.qZA()()(),t.TgZ(5,"div",9)(6,"div",15)(7,"div")(8,"p")(9,"strong"),t._uU(10,"Fecha:"),t.qZA(),t._uU(11," 01-06-2023"),t.qZA()()(),t.TgZ(12,"div",15)(13,"strong"),t._uU(14,"Descripcion:"),t.qZA(),t.TgZ(15,"p"),t._uU(16),t.qZA()(),t.TgZ(17,"div",16),t.YNc(18,_,3,2,"div",17),t.qZA()()()),2&n){const e=o.$implicit;t.xp6(16),t.hij(" ",e.descripcion," "),t.xp6(2),t.Q6J("ngIf",""!==e.anexo)}}function M(n,o){if(1&n&&(t.TgZ(0,"div")(1,"h1",35),t._uU(2,"Respuestas"),t.qZA(),t.YNc(3,I,19,2,"div",36),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",e.respuestas)}}const q=function(){return{width:"100%"}},R=function(){return{"font-weight":"bold"}},j=function(){return{width:"40%"}};function O(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-card",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"span",7),t._UZ(6,"i",8),t.qZA()()(),t.TgZ(7,"div",9)(8,"div",10),t._UZ(9,"img",11),t.qZA(),t.TgZ(10,"div",12)(11,"div",13)(12,"div",14)(13,"h3"),t._uU(14),t.qZA()()()(),t.TgZ(15,"div",15)(16,"div")(17,"p")(18,"strong"),t._uU(19,"Tipo de solicitud:"),t.qZA(),t._uU(20),t.qZA(),t.TgZ(21,"p")(22,"strong"),t._uU(23,"Usuario:"),t.qZA(),t._uU(24),t.qZA(),t.TgZ(25,"p")(26,"strong"),t._uU(27,"Fecha:"),t.qZA(),t._uU(28," 01-06-2023"),t.qZA()()(),t.TgZ(29,"div",15)(30,"strong"),t._uU(31,"Descripcion:"),t.qZA(),t.TgZ(32,"p"),t._uU(33),t.qZA()(),t.TgZ(34,"div",16),t.YNc(35,T,3,2,"div",17),t.qZA(),t.TgZ(36,"div",16)(37,"div",18),t._UZ(38,"button",19),t.qZA()()()(),t.YNc(39,M,4,1,"div",20),t.TgZ(40,"div")(41,"div",4)(42,"div",5)(43,"div",6)(44,"span",7),t._UZ(45,"i",21),t.qZA()()(),t.TgZ(46,"div",22)(47,"form",23)(48,"div",24)(49,"div",25)(50,"h2"),t._uU(51,"Adjuntar respuesta"),t.qZA()(),t.TgZ(52,"div",25),t._UZ(53,"textarea",26),t.qZA(),t.TgZ(54,"div",27)(55,"label",28),t._uU(56,"Puedes adjuntar un archivo: (Opcional)"),t.qZA(),t.TgZ(57,"p-fileUpload",29,30),t.NdJ("onSelect",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.adjuntarArchivo(i))}),t.qZA()(),t.TgZ(59,"div",25)(60,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t.qZA()()()()()()()()()}if(2&n){const e=t.oxw(),r=t.MAs(2);t.xp6(14),t.Oqu(e.solicitud[0].titulo),t.xp6(6),t.hij(" ",e.solicitud[0].tipopqrs.tipo,""),t.xp6(4),t.hij(" ",e.solicitud[0].persona,""),t.xp6(9),t.Oqu(e.solicitud[0].description),t.xp6(2),t.Q6J("ngIf",""!==e.solicitud[0].anexo),t.xp6(3),t.Tol("EP"===e.solicitud[0].status.name?"p-button-warning m-2":"FN"===e.solicitud[0].status.name?"p-button-danger m-2 ":"p-button m-2"),t.Q6J("label",e.solicitud[0].status.valor),t.xp6(1),t.Q6J("ngIf",e.respuestas.length>0)("ngIfElse",r),t.xp6(8),t.Q6J("formGroup",e.form),t.xp6(6),t.Akn(t.DdM(21,q)),t.Q6J("maxlength",600),t.xp6(2),t.Akn(t.DdM(22,R)),t.xp6(2),t.Q6J("maxFileSize",5242880)("showUploadButton",!1)("showCancelButton",!1),t.xp6(3),t.Akn(t.DdM(23,j))}}function P(n,o){1&n&&(t.TgZ(0,"div",40)(1,"p"),t._uU(2,"Aun no hay respuestas para esta solicitud."),t.qZA()())}const w=[{path:"ver",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ver"]],decls:2,vars:0,template:function(e,r){1&e&&(t.TgZ(0,"p"),t._uU(1,"ver works!"),t.qZA())}}),n})()},{path:"crear",component:v},{path:"editar",component:x},{path:"eliminar",component:Z},{path:"verDetalles",component:(()=>{class n{constructor(e,r,i,d){this.pqrsService=e,this.route=r,this.fb=i,this.messageService=d,this.API_URI=u.N.API_URI,this.API_URL_MEDIA=u.N.API_URL_MEDIA,this.solicitud=[],this.respuestas=[],this.id="",this.addPermission="add_respuesta",this.form=this.fb.group({descripcion:["",[a.kI.required,a.kI.maxLength(600)]]}),this.files=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerRespuestas()}submit(){const e=new FormData;void 0!==this.files[0]&&e.append("anexo",this.files[0]),e.append("descripcion",this.form.value.descripcion),e.append("pqrs",this.id);try{this.pqrsService.post(`${this.API_URI}/pqrs/respuesta/create/`,e,this.token).subscribe(r=>(this.form.reset(),this.traerRespuestas(),this.messageService.add({severity:"success",summary:"Success",detail:"Creado correctamente"})))}catch(r){return console.log(r),this.messageService.add({severity:"error",summary:"Error",detail:"Hubo en error"})}}onUpload(e){this.files=[];const r=e.target.files[e.target.files.length-1];null!=r&&(this.files=[r])}traerRespuestas(){this.solicitud=[],this.respuestas=[],this.route.queryParams.subscribe(({id:e})=>{this.id=e;let r={pqrs:e};try{this.pqrsService.post(`${this.API_URI}/pqrs/respuesta/query/`,r,this.token).subscribe(i=>{console.log(i.data.respuestas),this.solicitud=i.data.pqrs,this.respuestas=i.data.respuestas})}catch(i){console.log(i)}})}adjuntarArchivo(e){const r=e.files;r.length>0&&(this.archivoAdjunto=r[0])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.K),t.Y36(p.gz),t.Y36(a.QS),t.Y36(U.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ver-una"]],viewQuery:function(e,r){if(1&e&&t.Gf(y,5),2&e){let i;t.iGM(i=t.CRH())&&(r.fileUpload=i.first)}},decls:4,vars:1,consts:[["titulo","Detalles",4,"ngIf"],["elseBlockRespuestas",""],["titulo","Detalles"],["card-body",""],["id","card-custom",1,"my-3"],["id","card-header"],[1,"p-inputgroup"],[1,"p-inputgroup-addon",2,"background-color","#f16357","border","1px solid #f16357","color","white"],[1,"pi","pi-calendar"],["id","card-body",1,"grid"],[1,"col-12","md:col-4","lg:col-2","flex","justify-content-center"],["appImgError","","src","assets/images/logo.png","title","Logo Uniguajira","alt","Logo Uniguajira",2,"max-width","100px","max-height","100px"],[1,"col-12","md:col-8","lg:col-10"],[1,"grid","flex","justify-content-center"],[1,"col-12","md:col-12","lg:col-12","text-center"],[1,"col-12","md:col-12","lg:col-12"],[1,"col-12","md:col-6","lg:col-6"],["class","mx-2 lg:flex lg:justify-content-start sm:flex sm:justify-content-start",4,"ngIf"],[1,"mx-2","lg:flex","lg:justify-content-end","sm:flex","sm:justify-content-end"],["pButton","","type","button",3,"label"],[4,"ngIf","ngIfElse"],[1,"pi","pi-calendar-plus"],["id","card-body"],[3,"formGroup"],[1,"grid"],[1,"col-12","flex","justify-content-center"],["rows","7","cols","10","placeholder","Aqui puedes escribir la respuesta a lo solicitado en la solicitud.","formControlName","descripcion","pInputTextarea","",3,"maxlength"],[1,"col-12","my-3"],["htmlFor","Asunto",1,"mb-2"],["name","anexo","chooseLabel","Subir",3,"maxFileSize","showUploadButton","showCancelButton","onSelect"],["fileUpload",""],["pButton","","pRipple","","type","submit","label","Responder",1,"p-button-success",3,"click"],[1,"mx-2","lg:flex","lg:justify-content-start","sm:flex","sm:justify-content-start"],["Target","_blank",3,"href"],["pButton","","type","button","label","Anexo","icon","pi pi-paperclip",1,"p-button-success","m-2"],[1,"text-center","my-2"],["id","card-anwser-custom","class","my-3",4,"ngFor","ngForOf"],["id","card-anwser-custom",1,"my-3"],[1,"p-inputgroup-addon",2,"background-color","#9BABB8","border","1px solid #9BABB8","color","white"],[1,"pi","pi-calendar-minus"],[1,"text-center"]],template:function(e,r){1&e&&(t.YNc(0,O,61,24,"app-card",0),t.YNc(1,P,3,0,"ng-template",null,1,t.W1O),t._UZ(3,"p-toast")),2&e&&t.Q6J("ngIf",r.solicitud.length>0)},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,C.A,b.j,m.Hq,g.FN,f.g,h.p],styles:["#card-custom[_ngcontent-%COMP%]{border:1px solid rgba(93,90,90,.2);border-radius:5px;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}#card-custom[_ngcontent-%COMP%]   #card-header[_ngcontent-%COMP%]{width:100%;height:2.1rem;border:1px solid rgba(93,90,90,.2);border-radius:5px 5px 0 0;background-color:#f16357}#card-custom[_ngcontent-%COMP%]   #card-body[_ngcontent-%COMP%]{padding:1rem}#card-anwser-custom[_ngcontent-%COMP%]{border:1px solid rgba(93,90,90,.2);border-radius:5px;box-shadow:#0000001a 0 1px 3px,#0000000f 0 1px 2px}#card-anwser-custom[_ngcontent-%COMP%]   #card-header[_ngcontent-%COMP%]{width:100%;height:2.1rem;border:1px solid rgba(93,90,90,.2);border-radius:5px 5px 0 0;background-color:#9babb8}#card-anwser-custom[_ngcontent-%COMP%]   #card-body[_ngcontent-%COMP%]{padding:1rem}[_nghost-%COMP%]     .p-component{.p-fileupload-buttonbar {background: #fff; border: 1px solid #fff;} .p-fileupload-content {background: #fff; border: 1px solid #fff;}}"]}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(w),p.Bz]}),n})();var F=s(1740),S=s(8396),V=s(1493),E=s(369),J=s(2174),D=s(4247),N=s(2210),Y=s(5108),L=s(2946),Q=s(4466);let z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,a.u5,a.UX,B,Q.m,F.j,m.hJ,g.EV,S.U$,V.S,E.n,J.fx,D.d,N.kW,f.A,Y.x,L.L,h.O]}),n})()}}]);