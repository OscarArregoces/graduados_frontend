"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[943],{6943:(K,m,o)=>{o.r(m),o.d(m,{TipoIdentificacionModule:()=>H});var I=o(6895),g=o(1933),c=o(433),E=o(9050),x=o(2340),e=o(8274),F=o(7180),u=o(805),k=o(1967),_=o(9219),M=o(6209),D=o(6474),f=o(1740),h=o(5593),v=o(2453),l=o(8396),b=o(1493),y=o(369),C=o(4247);const G=function(){return{display:"flex","justify-content":"space-between"}},S=function(){return{"font-size":"20px"}},T=function(){return{width:"100%"}};function U(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",17)(2,"div",26),e._uU(3," Lista de Tipo Identificaci\xf3n "),e.qZA(),e.TgZ(4,"div",27)(5,"span",28),e._UZ(6,"i",29),e.TgZ(7,"input",30),e.NdJ("input",function(a){e.CHM(t);const s=e.oxw(),d=e.MAs(10);return e.KtG(d.filterGlobal(s.getEventValue(a),"contains"))}),e.qZA()()()()()}2&n&&(e.xp6(1),e.Akn(e.DdM(8,G)),e.xp6(1),e.Akn(e.DdM(9,S)),e.xp6(3),e.Akn(e.DdM(10,T)),e.xp6(2),e.Akn(e.DdM(11,T)))}function J(n,r){1&n&&(e.TgZ(0,"tr")(1,"th",31),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",32)(4,"p"),e._uU(5,"Indice"),e.qZA()(),e.TgZ(6,"th",33)(7,"div",34),e._uU(8," Nombre "),e._UZ(9,"p-sortIcon",35)(10,"p-columnFilter",36),e.qZA()(),e.TgZ(11,"th",37),e._uU(12," Editar "),e.qZA(),e.TgZ(13,"th",37),e._uU(14," Eliminar "),e.qZA()())}function N(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr",38)(1,"td"),e._UZ(2,"p-tableCheckbox",39),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",40),e._uU(7,"Tipo"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td",41)(10,"button",42),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.changeDisplayFormEdit(s))}),e.qZA()(),e.TgZ(11,"td",41),e._UZ(12,"p-confirmPopup"),e.TgZ(13,"button",43),e.NdJ("click",function(a){const d=e.CHM(t).$implicit,z=e.oxw();return e.KtG(z.confirm(a,d.id))}),e.qZA()()()}if(2&n){const t=r.$implicit,i=r.rowIndex;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.hij(" ",i+1," "),e.xp6(4),e.hij(" ",t.name," ")}}function P(n,r){1&n&&(e.TgZ(0,"tr")(1,"td",44),e._uU(2,"No hay datos que mostrar"),e.qZA()())}const R=function(){return[10,25,50]},B=function(){return["name"]},Z=function(n){return{width:n,"text-aling":"center"}},A=function(){return{"font-weight":"bold"}},p=function(){return{width:"40%"}},w=[{path:"gestionar",component:(()=>{class n{constructor(t,i,a,s,d){this.adminService=t,this.messageService=i,this.pantallaService=a,this.confirmationService=s,this.fb=d,this.API_URI=x.N.API_URI,this.displayFormCreate=!1,this.displayFormEdit=!1,this.loading=!1,this.tiposIdentificacion=[],this.tiposIdentificacionVerificated=[],this.itemsBulkDelete=[],this.idFormEdit="",this.inforCardDescription="\n  Nuestro m\xf3dulo de Gesti\xf3n de Tipos de Identificaci\xf3n ofrece una soluci\xf3n eficiente para administrar la variedad de documentos de identificaci\xf3n utilizados por nuestros usuarios al registrarse en la aplicaci\xf3n. Con esta funcionalidad, puedes crear, editar, eliminar y visualizar los diferentes tipos de identificaci\xf3n admitidos, como c\xe9dulas, pasaportes, licencias de conducir, entre otros. Proporciona una experiencia de usuario personalizada, permitiendo a los usuarios seleccionar con precisi\xf3n el tipo de documento que desean asociar a su perfil. \n  ",this.formCreate=this.fb.group({name:["",c.kI.required]}),this.formEdit=this.fb.group({name:["",c.kI.required]}),this.variantColor=E.$.Blue}ngOnInit(){this.token=localStorage.getItem("token"),this.traerTiposIdentificacion();const[t]=this.pantallaService.calcularEspacioPantalla();this.subscription$=t.subscribe(i=>this.width=i)}ngOnDestroy(){this.subscription$.unsubscribe()}onSubmit(){if(this.tiposIdentificacionVerificated.includes(this.formCreate.value.name.toLowerCase().replace(/\s+/g,"")))return this.messageService.add({severity:"error",summary:"Error",detail:"Ya existe"});try{this.adminService.post(`${this.API_URI}/documents/create/`,this.formCreate.value,this.token).subscribe(t=>{this.formCreate.reset(),this.traerTiposIdentificacion(),this.changeDisplayFormCreate(),this.messageService.add({severity:"success",summary:"Service Message",detail:"Creado correctamente"})})}catch(t){console.log("Error en consnulta",t)}}handleEdit(){if(this.tiposIdentificacionVerificated.includes(this.formEdit.value.name.toLowerCase().replace(/\s+/g,"")))return this.messageService.add({severity:"error",summary:"Error",detail:"Ya existe"});try{this.adminService.put(`${this.API_URI}/documents/update/${this.idFormEdit}`,this.formEdit.value,this.token).subscribe(t=>{this.formEdit.reset(),this.traerTiposIdentificacion(),this.changeDisplayFormEdit(),this.messageService.add({severity:"success",summary:"Service Message",detail:"Editado correctamente"})})}catch(t){console.log("Error en consnulta",t)}}deleteAll(){const t=this.itemsBulkDelete.map(a=>a.id);if(0===t.length)return this.messageService.add({severity:"error",summary:"Notififaci\xf3n",detail:"Debes seleccionar al menos un registro"});let i={ids:t};try{this.adminService.delete(`${this.API_URI}/documents/delete/`,this.token,i).subscribe(a=>{this.traerTiposIdentificacion(),this.itemsBulkDelete=[],this.messageService.add({severity:"success",summary:"Service Message",detail:"Eliminado correctamente"})})}catch(a){console.log("Error en consnulta",a)}}changeDisplayFormCreate(){this.displayFormCreate=!this.displayFormCreate}changeDisplayFormEdit(t={}){this.idFormEdit=t.id,this.formEdit.patchValue(t),this.displayFormEdit=!this.displayFormEdit}traerTiposIdentificacion(){this.tiposIdentificacion=[],this.tiposIdentificacionVerificated=[];try{this.adminService.get(`${this.API_URI}/documents`,this.token).subscribe(t=>{this.tiposIdentificacion=t.data,t.data.map(i=>this.tiposIdentificacionVerificated.push(i.name))})}catch(t){console.log("Error en consnulta",t)}}getEventValue(t){return t.target.value}confirm(t,i){this.confirmationService.confirm({target:t.target,message:"\xbfSeguro que desea eliminar este tipo de identificaci\xf3n?",icon:"pi pi-exclamation-triangle",accept:()=>{try{this.adminService.delete(`${this.API_URI}/documents/delete/${i}/`,this.token).subscribe(a=>(this.traerTiposIdentificacion(),this.messageService.add({severity:"success",summary:"Success",detail:"Eliminado correctamente !!!"})))}catch(a){console.log(a)}},reject:()=>{}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(F.l),e.Y36(u.ez),e.Y36(k.c),e.Y36(u.YP),e.Y36(c.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gestionar"]],decls:40,vars:51,consts:[["titulo","Gestionar Tipo Identificaci\xf3n"],["card-body","",1,"grid"],[3,"description"],[1,"col-12"],["pButton","","pRipple","","type","submit","icon","pi pi-plus","label","Crear Nuevo",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","submit","icon","pi pi-trash","label"," Eliminar seleccionados",1,"p-button-danger","mr-2",3,"click"],[1,"col-12","md:col-12","lg:col-12"],[1,"flex","flex-column","gap-2"],["dataKey","id","styleClass","p-datatable-customers","responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} elementos","responsiveLayout","scroll",3,"value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visible","showHeader","modal","dismissableMask","visibleChange"],["titulo","Creando Tipo Identificaci\xf3n"],[3,"formGroup"],[1,"grid"],[1,"mb-2"],["type","text","placeholder","Escribe aqui..","formControlName","name","pInputText",""],[1,"col-12","md:col-12","lg:col-12","flex","justify-content-center"],["pButton","","pRipple","","type","button","label","Guardar",1,"p-button-success","m-3",3,"disabled","click"],["pButton","","pRipple","","type","button","label","Volver",1,"p-button-raised","p-button-secondary","m-3",3,"click"],["titulo","Editando Tipo Identificaci\xf3n"],["pButton","","pRipple","","type","button","label","Editar",1,"p-button-warning","m-3",3,"disabled","click"],[1,"table-header"],[1,"col-12","md:col-6","lg:col-6"],[1,"col-12","md:col-6","lg:col-3"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Busqueda global",3,"input"],[2,"width","3rem"],[2,"width","5rem"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu",1,"ml-auto"],[2,"width","8rem","text-align","center"],[1,"p-selectable-row"],[3,"value"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-warning",3,"click"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-danger",3,"click"],["colspan","8"]],template:function(t,i){1&t&&(e.TgZ(0,"app-card",0)(1,"div",1),e._UZ(2,"app-custom-info-card",2),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.changeDisplayFormCreate()}),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return i.deleteAll()}),e.qZA()(),e.TgZ(6,"div",6)(7,"div",7)(8,"p-card")(9,"p-table",8,9),e.NdJ("selectionChange",function(s){return i.itemsBulkDelete=s}),e.YNc(11,U,8,12,"ng-template",10),e.YNc(12,J,15,0,"ng-template",11),e.YNc(13,N,14,3,"ng-template",12),e.YNc(14,P,3,0,"ng-template",13),e.qZA()()()()()(),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(s){return i.displayFormCreate=s}),e.TgZ(16,"app-card-dialog",15)(17,"form",16)(18,"div",17)(19,"div",6)(20,"div",7)(21,"label",18),e._uU(22,"Nombre "),e.qZA(),e._UZ(23,"input",19),e.qZA()(),e.TgZ(24,"div",20)(25,"button",21),e.NdJ("click",function(){return i.onSubmit()}),e.qZA(),e.TgZ(26,"button",22),e.NdJ("click",function(){return i.changeDisplayFormCreate()}),e.qZA()()()()()(),e.TgZ(27,"p-dialog",14),e.NdJ("visibleChange",function(s){return i.displayFormEdit=s}),e.TgZ(28,"app-card-dialog",23)(29,"form",16)(30,"div",17)(31,"div",6)(32,"div",7)(33,"label",18),e._uU(34,"Nombre "),e.qZA(),e._UZ(35,"input",19),e.qZA()(),e.TgZ(36,"div",20)(37,"button",24),e.NdJ("click",function(){return i.handleEdit()}),e.qZA(),e.TgZ(38,"button",22),e.NdJ("click",function(){return i.changeDisplayFormEdit()}),e.qZA()()()()()(),e._UZ(39,"p-toast")),2&t&&(e.xp6(2),e.Q6J("description",i.inforCardDescription),e.xp6(7),e.Q6J("value",i.tiposIdentificacion)("selection",i.itemsBulkDelete)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(39,R))("loading",i.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",e.DdM(40,B)),e.xp6(6),e.Akn(e.VKq(41,Z,i.width)),e.Q6J("visible",i.displayFormCreate)("showHeader",!1)("modal",!0)("dismissableMask",!0),e.xp6(2),e.Q6J("formGroup",i.formCreate),e.xp6(4),e.Akn(e.DdM(43,A)),e.xp6(4),e.Akn(e.DdM(44,p)),e.Q6J("disabled",!i.formCreate.valid),e.xp6(1),e.Akn(e.DdM(45,p)),e.xp6(1),e.Akn(e.VKq(46,Z,i.width)),e.Q6J("visible",i.displayFormEdit)("showHeader",!1)("modal",!0)("dismissableMask",!0),e.xp6(2),e.Q6J("formGroup",i.formEdit),e.xp6(4),e.Akn(e.DdM(48,A)),e.xp6(4),e.Akn(e.DdM(49,p)),e.Q6J("disabled",!i.formEdit.valid),e.xp6(1),e.Akn(e.DdM(50,p)))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,_.A,M.i,D.t,f.o,h.Hq,v.FN,u.jx,l.iA,l.lQ,l.fz,l.UA,l.Mo,l.xl,b.V,y.P,C.Z],styles:["[_nghost-%COMP%]     .p-datatable-header{background-color:#f16357;border:1px solid #f16357}"]}),n})()}];let $=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(w),g.Bz]}),n})();var V=o(4466),Y=o(2210),j=o(3054),Q=o(1989),q=o(613);let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[I.ez,c.u5,c.UX,$,V.m,f.j,h.hJ,v.EV,l.U$,b.S,Y.kW,y.n,j.A,Q.nD,q.cc,C.d]}),n})()}}]);