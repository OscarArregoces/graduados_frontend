"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[704],{1009:(U,v,o)=>{o.d(v,{S:()=>b});var m=o(529),c=o(8274);let b=(()=>{class e{constructor(d){this.http=d}get(d,l){let h={headers:new m.WM({"Content-Type":"application/json",Authorization:`Bearer ${l}`})};return this.http.get(d,h)}post(d,l,h){let a={headers:new m.WM({"Content-Type":"application/json",Authorization:`Bearer ${h}`})};return this.http.post(d,l,a)}put(d,l,h){let a={headers:new m.WM({"Content-Type":"application/json",Authorization:`Bearer ${h}`})};return this.http.put(d,l,a)}delete(d,l,h){let a={headers:new m.WM({"Content-Type":"application/json",Authorization:`Bearer ${l}`}),body:h};return this.http.delete(d,a)}}return e.\u0275fac=function(d){return new(d||e)(c.LFG(m.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8794:(U,v,o)=>{o.d(v,{z:()=>d});var m=o(529),c=o(262),b=o(2843),e=o(2340),_=o(8274);let d=(()=>{class l{constructor(a){this.http=a,this.API_URI=e.N.API_URI}getAreas(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/eventos/areas`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getSubareas(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/eventos/sub/areas/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getTipoActividades(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/eventos/tipos/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getActividades(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/eventos/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getSedes(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/university/sede/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getFacultades(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/university/faculta/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getProgramas(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/university/programa/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getGeneros(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/genders`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getCondiciones(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/condiciones`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getTiposDocumento(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/documents`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getSolicitudes(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/pqrs`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getTipoSolicitudes(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/pqrs/tipo/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getPreguntas(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/poll/questions/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getMomentos(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/poll/momentos/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getCapacitaciones(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/advertisements/capacitaciones/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getCategorias(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/advertisements/category/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getSubCategorias(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/advertisements/sub/category/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getEmprendimientos(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/advertisements/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getRoles(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/roles/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getPaises(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/nationality/pais/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getDepartamentos(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/nationality/departamento`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getCiudades(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/nationality/ciudad`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getServicios(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/eventos/servicios/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}getDependencias(){const a=this.createHeaders();return this.http.get(`${this.API_URI}/gestor/`,{headers:a}).pipe((0,c.K)(this.handleHttpError))}createHeaders(){const a=localStorage.getItem("token");return a?new m.WM({Authorization:`Bearer ${a}`}):(console.warn("No se encontr\xf3 un token en el localStorage."),new m.WM)}handleHttpError(a){return(0,b._)(()=>a)}}return l.\u0275fac=function(a){return new(a||l)(_.LFG(m.eN))},l.\u0275prov=_.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},5704:(U,v,o)=>{o.r(v),o.d(v,{SubareasModule:()=>se});var m=o(6895),c=o(2496),b=o(2340),e=o(8274),_=o(1009),d=o(805),l=o(8396);function h(i,n){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Id"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Area"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"SubArea"),e.qZA()())}function a(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.area),e.xp6(2),e.Oqu(t.name)}}const H=function(){return{"min-width":"10rem"}};let M=(()=>{class i{constructor(t){this.eventosService=t,this.API_URI=b.N.API_URI,this.subareas=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerSubAreas()}traerSubAreas(){this.eventosService.get(`${this.API_URI}/eventos/sub/areas/`,this.token).subscribe(t=>{this.subareas=t.data})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ver"]],decls:6,vars:3,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Todos las subareas"),e.qZA(),e.TgZ(3,"p-table",1),e.YNc(4,h,7,0,"ng-template",2),e.YNc(5,a,7,3,"ng-template",3),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("value",r.subareas)("tableStyle",e.DdM(2,H)))},dependencies:[d.jx,l.iA],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]}),i})();var p=o(433),Z=o(1740),f=o(5593),A=o(2453),S=o(2210);let R=(()=>{class i{constructor(t,r,s){this.fb=t,this.eventosService=r,this.messageService=s,this.API_URI=b.N.API_URI,this.form=this.fb.group({name:["",p.kI.required],area:["",p.kI.required]}),this.areas=[],this.subareas=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerSubAreas(),this.traerAreas()}onSubmit(){if(this.areas.includes(this.form.value.name.trim().toLowerCase()))return this.messageService.add({severity:"error",summary:"Error",detail:"Esta area ya existe"});this.eventosService.post(`${this.API_URI}/eventos/sub/areas/create/`,{name:this.form.value.name,area:this.form.value.area.id},this.token).subscribe(r=>(this.form.reset(),this.messageService.add({severity:"success",summary:"Success",detail:"Area creado correctamente"}),this.traerSubAreas()))}traerSubAreas(){this.eventosService.get(`${this.API_URI}/eventos/sub/areas/`,this.token).subscribe(t=>{this.subareas=[],this.subareas=t.data})}traerAreas(){this.eventosService.get(`${this.API_URI}/eventos/areas/`,this.token).subscribe(t=>{this.areas=[],this.areas=t.data})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.QS),e.Y36(_.S),e.Y36(d.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-crear"]],decls:7,vars:2,consts:[[1,"main","m-auto","p-5",3,"formGroup","ngSubmit"],[1,"m-3","text-center"],["formControlName","area","optionLabel","name","placeholder","Selecciona un area",3,"options"],["type","text","pInputText","","placeholder","Nombre","formControlName","name"],["pButton","","pRipple","","type","submit","label","Crear area",1,"p-button-success"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(1,"h1",1),e._uU(2,"Crear subarea"),e.qZA(),e._UZ(3,"p-dropdown",2)(4,"input",3)(5,"button",4),e.qZA(),e._UZ(6,"p-toast")),2&t&&(e.Q6J("formGroup",r.form),e.xp6(3),e.Q6J("options",r.areas))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Z.o,f.Hq,A.FN,S.Lt],styles:[".main[_ngcontent-%COMP%]{width:500px;border:1px solid rgba(145,145,145,.836);border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center}.main[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:80%;margin:10px}"]}),i})();var T=o(1493);function k(i,n){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Area"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"SubArea"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Editar"),e.qZA()())}function q(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",9),e.NdJ("click",function(){const u=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.changeDisplay(u.id))}),e.qZA()()()}if(2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.area),e.xp6(2),e.Oqu(t.name)}}const D=function(){return{"min-width":"10rem"}},F=function(){return{width:"40vw",height:"40vh"}};let $=(()=>{class i{constructor(t,r,s){this.messageService=t,this.eventosService=r,this.fb=s,this.API_URI=b.N.API_URI,this.subareas=[],this.subareasVerificated=[],this.display=!1,this.id="",this.form=this.fb.group({name:["",p.kI.required]})}ngOnInit(){this.token=localStorage.getItem("token"),this.traerSubareas()}submit(){if(this.subareasVerificated.includes(this.form.value.name.trim().toLowerCase()))return this.messageService.add({severity:"error",summary:"Error",detail:"Esta subarea ya existe"});try{this.eventosService.put(`${this.API_URI}/eventos/sub/areas/update/${this.id}/`,this.form.value,this.token).subscribe(t=>(this.form.reset(),this.traerSubareas(),this.changeDisplay(this.id),this.messageService.add({severity:"success",summary:"Success",detail:"Editado correctamente"})))}catch(t){return this.traerSubareas(),this.messageService.add({severity:"success",summary:"Success",detail:`${t.errors.error}`})}}traerSubareas(){this.subareas=[],this.subareasVerificated=[],this.eventosService.get(`${this.API_URI}/eventos/sub/areas/`,this.token).subscribe(t=>{t.data.map(r=>this.subareasVerificated.push(r.name.trim().toLowerCase())),this.subareas=t.data})}changeDisplay(t=""){this.id=t,this.display=!this.display}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.ez),e.Y36(_.S),e.Y36(p.QS))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editar"]],decls:12,vars:12,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Editar area",3,"visible","modal","draggable","resizable","visibleChange"],[1,"grid","dialog-form-crear","col-12","md:col-12","lg:col-12"],[3,"formGroup","submit"],["type","text","pInputText","","placeholder","Nombre","formControlName","name",1,"my-3"],["pButton","","pRipple","","type","submit","label","Editar",1,"p-button-warning",3,"disabled"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning","mx-3",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Editar subareas"),e.qZA(),e.TgZ(3,"p-table",1),e.YNc(4,k,7,0,"ng-template",2),e.YNc(5,q,7,2,"ng-template",3),e.qZA()(),e.TgZ(6,"p-dialog",4),e.NdJ("visibleChange",function(u){return r.display=u}),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("submit",function(){return r.submit()}),e._UZ(9,"input",7)(10,"button",8),e.qZA()()(),e._UZ(11,"p-toast")),2&t&&(e.xp6(3),e.Q6J("value",r.subareas)("tableStyle",e.DdM(10,D)),e.xp6(3),e.Akn(e.DdM(11,F)),e.Q6J("visible",r.display)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(2),e.Q6J("disabled",!r.form.valid))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Z.o,f.Hq,A.FN,d.jx,l.iA,T.V],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:80%}"]}),i})();var E=o(369);function N(i,n){1&i&&(e.TgZ(0,"tr")(1,"th",4),e._uU(2,"Indice"),e.qZA(),e.TgZ(3,"th",5),e._uU(4,"Area "),e._UZ(5,"p-sortIcon",6),e.qZA(),e.TgZ(6,"th",7),e._uU(7,"Subarea "),e._UZ(8,"p-sortIcon",8),e.qZA(),e.TgZ(9,"th",4),e._uU(10,"Eliminar"),e.qZA()())}function w(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"p-confirmPopup"),e.TgZ(9,"button",9),e.NdJ("click",function(s){const g=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.confirm(s,g.id))}),e.qZA()()()}if(2&i){const t=n.$implicit,r=n.rowIndex;e.xp6(2),e.Oqu(r),e.xp6(2),e.Oqu(t.area),e.xp6(2),e.Oqu(t.name)}}const J=function(){return{"min-width":"60rem"}};let O=(()=>{class i{constructor(t,r,s){this.confirmationService=t,this.eventosService=r,this.messageService=s,this.API_URI=b.N.API_URI,this.subareas=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.traerSubareas()}confirm(t,r){this.confirmationService.confirm({target:t.target,message:"\xbfSeguro que desea eliminar esta subarea?",icon:"pi pi-exclamation-triangle",accept:()=>{try{this.eventosService.delete(`${this.API_URI}/eventos/sub/areas/delete/${r}/`,this.token).subscribe(s=>(this.traerSubareas(),this.messageService.add({severity:"success",summary:"Success",detail:"Eliminado correctamente !!!"})))}catch(s){console.log(s)}},reject:()=>{}})}traerSubareas(){this.subareas=[];try{this.eventosService.get(`${this.API_URI}/eventos/sub/areas/`,this.token).subscribe(t=>this.subareas=t.data)}catch(t){console.log(t)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.YP),e.Y36(_.S),e.Y36(d.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-eliminar"]],decls:7,vars:3,consts:[[1,"main"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","10%"],["pSortableColumn","area",2,"width","10%"],["field","area"],["pSortableColumn","name",2,"width","10%"],["field","name"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger","mx-3",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Eliminar subareas"),e.qZA(),e.TgZ(3,"p-table",1),e.YNc(4,N,11,0,"ng-template",2),e.YNc(5,w,10,3,"ng-template",3),e.qZA()(),e._UZ(6,"p-toast")),2&t&&(e.xp6(3),e.Q6J("value",r.subareas)("tableStyle",e.DdM(2,J)))},dependencies:[f.Hq,A.FN,d.jx,l.iA,l.lQ,l.fz,E.P],styles:[".main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]}),i})();var G=o(1967),K=o(8794),x=o(4247),j=o(9219),Y=o(6474);const B=function(){return{display:"flex","justify-content":"space-between"}},z=function(){return{"font-size":"20px"}},y=function(){return{width:"100%"}};function Q(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",16)(2,"div",17),e._uU(3," Lista de Subareas "),e.qZA(),e.TgZ(4,"div",31)(5,"span",32),e._UZ(6,"i",33),e.TgZ(7,"input",34),e.NdJ("input",function(s){e.CHM(t);const u=e.oxw(),g=e.MAs(9);return e.KtG(g.filterGlobal(u.getEventValue(s),"contains"))}),e.qZA()()()()()}2&i&&(e.xp6(1),e.Akn(e.DdM(8,B)),e.xp6(1),e.Akn(e.DdM(9,z)),e.xp6(3),e.Akn(e.DdM(10,y)),e.xp6(2),e.Akn(e.DdM(11,y)))}function L(i,n){1&i&&(e.TgZ(0,"tr")(1,"th",35),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",36)(4,"p"),e._uU(5,"Indice"),e.qZA()(),e.TgZ(6,"th",37)(7,"div",38),e._uU(8," Nombre "),e._UZ(9,"p-sortIcon",39)(10,"p-columnFilter",40),e.qZA()(),e.TgZ(11,"th",41)(12,"div",38),e._uU(13," Area "),e._UZ(14,"p-sortIcon",42)(15,"p-columnFilter",43),e.qZA()(),e.TgZ(16,"th",44),e._uU(17," Editar "),e.qZA(),e.TgZ(18,"th",44),e._uU(19," Eliminar "),e.qZA()())}function V(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr",45)(1,"td"),e._UZ(2,"p-tableCheckbox",46),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",47),e._uU(7,"Tipo"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"span",47),e._uU(11,"Tipo"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"td",48)(14,"button",49),e.NdJ("click",function(){const u=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.changeDisplayFormEdit(u))}),e.qZA()(),e.TgZ(15,"td",48),e._UZ(16,"p-confirmPopup"),e.TgZ(17,"button",50),e.NdJ("click",function(s){const g=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.confirm(s,g.id))}),e.qZA()()()}if(2&i){const t=n.$implicit,r=n.rowIndex;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.hij(" ",r+1," "),e.xp6(4),e.hij(" ",t.name," "),e.xp6(4),e.hij(" ",t.area.name," ")}}function W(i,n){1&i&&(e.TgZ(0,"tr")(1,"td",51),e._uU(2,"No hay datos que mostrar"),e.qZA()())}const X=function(){return[10,25,50]},ee=function(){return["pregunta_nombre","momento"]},P=function(i){return{width:i,"text-aling":"center","min-height":"70vh"}},I=function(){return{"font-weight":"bold"}},te=function(){return{width:"100%"}},re=[{path:"ver",component:M},{path:"crear",component:R},{path:"editar",component:$},{path:"eliminar",component:O},{path:"gestionar",component:(()=>{class i{constructor(t,r,s,u,g,C){this.eventosService=t,this.messageService=r,this.confirmationService=s,this.fb=u,this.pantallaService=g,this.dataFetchingService=C,this.searchValue="",this.width="",this.API_URI=b.N.API_URI,this.areas=[],this.subAreas=[],this.itemsBulkDelete=[],this.inforCardDescription="\n  'Gestionar Subareas' facilita la gesti\xf3n detallada de subtem\xe1ticas dentro de las \xe1reas principales. Permite a los administrativos personalizar y ajustar la organizaci\xf3n tem\xe1tica de las actividades, mejorando la precisi\xf3n y la coherencia en la presentaci\xf3n de eventos.\n  ",this.inforCardDescriptionCreate="\n  Ampl\xeda la riqueza tem\xe1tica de tus eventos al crear sub\xe1reas de manera eficiente. A\xf1ade capas de detalle a tus \xe1reas principales, ofreciendo una experiencia m\xe1s especializada y diversa. Esta funci\xf3n esencial potencia la versatilidad de tus eventos, asegurando una planificaci\xf3n integral y atractiva.\n  ",this.inforCardDescriptionEdit="\n  Mant\xe9n la agilidad en la adaptaci\xf3n de tus eventos al editar sub\xe1reas existentes. Ajusta detalles espec\xedficos para reflejar cambios en tus din\xe1micas de evento. Con esta herramienta clave, optimizas la organizaci\xf3n y personalizaci\xf3n de tus actividades, asegurando una experiencia \xfanica y actualizada para tu audiencia.\n  ",this.loading=!1,this.activityValues=[0,100],this.idEdit="",this.displayFormCreate=!1,this.displayFormEdit=!1,this.formCreate=this.fb.group({name:["",p.kI.required],area:["",p.kI.required]}),this.formEdit=this.fb.group({name:["",p.kI.required],area:["",p.kI.required]})}ngOnInit(){this.token=localStorage.getItem("token");const[t]=this.pantallaService.calcularEspacioPantalla();this.subscription$=t.subscribe(r=>this.width=r),this.dataFetchingService.getAreas().subscribe(r=>{this.areas=[],this.areas=r.data}),this.dataFetchingService.getSubareas().subscribe(r=>{this.subAreas=[],this.subAreas=r.data})}ngOnDestroy(){this.subscription$.unsubscribe()}onSubmit(){let t={name:this.formCreate.value.name,area:this.formCreate.value.area.id};try{this.eventosService.post(`${this.API_URI}/eventos/sub/areas/create/`,t,this.token).subscribe(r=>(this.formCreate.reset(),this.dataFetchingService.getSubareas().subscribe(s=>{this.subAreas=[],this.subAreas=s.data}),this.changeDisplayFormCreate(),this.messageService.add({severity:"success",summary:"Notificaci\xf3n",detail:"Creado correctamente"})))}catch(r){console.log("Error en consulta",r)}}handleEdit(){let t={name:this.formEdit.value.name,area:this.formEdit.value.area.id};try{this.eventosService.put(`${this.API_URI}/eventos/sub/areas/update/${this.idEdit}/`,t,this.token).subscribe(r=>(this.dataFetchingService.getSubareas().subscribe(s=>{this.subAreas=[],this.subAreas=s.data}),this.formEdit.reset(),this.changeDisplayFormEdit(),this.messageService.add({severity:"success",summary:"Notificaci\xf3n",detail:"Editado correctamente"})))}catch(r){console.log("Error en consulta",r)}}deleteAll(){const t=this.itemsBulkDelete.map(s=>s.id);if(0===t.length)return this.messageService.add({severity:"error",summary:"Notififaci\xf3n",detail:"Debes seleccionar al menos un registro"});let r={ids:t};try{this.eventosService.delete(`${this.API_URI}/eventos/sub/areas/delete/`,this.token,r).subscribe(s=>(this.dataFetchingService.getSubareas().subscribe(u=>{this.subAreas=[],this.subAreas=u.data}),this.messageService.add({severity:"success",summary:"Notificaci\xf3n",detail:"Eliminado correctamente !!!"})))}catch(s){console.log(s)}}changeDisplayFormCreate(){this.displayFormCreate=!this.displayFormCreate}closeDisplayFormCreate(){this.displayFormCreate=!1,this.formCreate.reset()}changeDisplayFormEdit(t={}){this.idEdit=t.id,this.formEdit.patchValue(t),this.displayFormEdit=!this.displayFormEdit}closeDisplayFormEdit(){this.displayFormEdit=!1,this.formEdit.reset()}getEventValue(t){return t.target.value}confirm(t,r){this.confirmationService.confirm({target:t.target,message:"\xbfSeguro que desea eliminar esta subArea?",icon:"pi pi-exclamation-triangle",accept:()=>{try{this.eventosService.delete(`${this.API_URI}/eventos/sub/areas/delete/${r}/`,this.token).subscribe(s=>(this.dataFetchingService.getSubareas().subscribe(u=>{this.subAreas=[],this.subAreas=u.data}),this.messageService.add({severity:"success",summary:"Success",detail:"Eliminado correctamente !!!"})))}catch(s){console.log(s)}},reject:()=>{}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.S),e.Y36(d.ez),e.Y36(d.YP),e.Y36(p.QS),e.Y36(G.c),e.Y36(K.z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gestionar"]],decls:61,vars:60,consts:[["titulo","Gestionar Subareas"],["card-body","",1,"grid"],[1,"col-12"],["pButton","","pRipple","","type","submit","icon","pi pi-plus","label","Crear Nuevo",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","submit","label"," Eliminar seleccionados","icon","pi pi-trash",1,"p-button-danger","mr-2",3,"click"],[1,"col-12","md:col-12","lg:col-12"],[1,"flex","flex-column","gap-2"],["dataKey","id","styleClass","p-datatable-customers","responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} elementos","responsiveLayout","scroll",3,"value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Creando Subarea",3,"visible","showHeader","modal","dismissableMask","visibleChange","onHide"],[3,"description"],[3,"formGroup"],[1,"grid"],[1,"col-12","md:col-6","lg:col-6"],[1,"mb-2"],[1,"p-inputgroup","my-1"],[1,"p-inputgroup-addon"],[1,"pi","pi-bookmark-fill",2,"color","#f16357"],["type","text","placeholder","Escribe aqui..","formControlName","name","pInputText",""],["formControlName","area","optionLabel","name",3,"options"],[1,"col-12","flex","justify-content-center","align-items-center","mt-5"],["pButton","","pRipple","","type","submit","label","Guardar","icon","pi pi-save",1,"p-button-success","mx-5",3,"disabled","click"],["pButton","","pRipple","","type","button","label","Cancelar",1,"p-button-outlined","p-button-danger","mx-5",3,"click"],["header","Actualizando Subarea",3,"visible","showHeader","modal","dismissableMask","visibleChange","onHide"],[1,"col-12","flex","justify-content-center","align-items-center"],["pButton","","pRipple","","type","submit","label","Actualizar","icon","pi pi-save",1,"p-button-warning","mx-5",3,"disabled","click"],[1,"table-header"],[1,"col-12","md:col-6","lg:col-3"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Busqueda global",3,"input"],[2,"width","3rem"],[2,"width","5rem"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu",1,"ml-auto"],["pSortableColumn","area.name"],["field","area.name"],["type","text","field","area.name","display","menu",1,"ml-auto"],[2,"width","8rem","text-align","center"],[1,"p-selectable-row"],[3,"value"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-warning",3,"click"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-danger",3,"click"],["colspan","8"]],template:function(t,r){1&t&&(e.TgZ(0,"app-card",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return r.changeDisplayFormCreate()}),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return r.deleteAll()}),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6)(7,"p-card")(8,"p-table",7,8),e.NdJ("selectionChange",function(u){return r.itemsBulkDelete=u}),e.YNc(10,Q,8,12,"ng-template",9),e.YNc(11,L,20,0,"ng-template",10),e.YNc(12,V,18,4,"ng-template",11),e.YNc(13,W,3,0,"ng-template",12),e.qZA()()()()()(),e.TgZ(14,"p-dialog",13),e.NdJ("visibleChange",function(u){return r.displayFormCreate=u})("onHide",function(){return r.closeDisplayFormCreate()}),e._UZ(15,"app-custom-info-card",14),e.TgZ(16,"form",15)(17,"div",16)(18,"div",17)(19,"div",6)(20,"label",18),e._uU(21,"Nombre "),e.qZA(),e.TgZ(22,"div",19)(23,"span",20),e._UZ(24,"i",21),e.qZA(),e._UZ(25,"input",22),e.qZA()()(),e.TgZ(26,"div",17)(27,"div",6)(28,"label",18),e._uU(29,"Area "),e.qZA(),e.TgZ(30,"div",19)(31,"span",20),e._UZ(32,"i",21),e.qZA(),e._UZ(33,"p-dropdown",23),e.qZA()()(),e.TgZ(34,"div",24)(35,"button",25),e.NdJ("click",function(){return r.onSubmit()}),e.qZA(),e.TgZ(36,"button",26),e.NdJ("click",function(){return r.closeDisplayFormCreate()}),e.qZA()()()()(),e.TgZ(37,"p-dialog",27),e.NdJ("visibleChange",function(u){return r.displayFormEdit=u})("onHide",function(){return r.closeDisplayFormEdit()}),e._UZ(38,"app-custom-info-card",14),e.TgZ(39,"form",15)(40,"div",16)(41,"div",17)(42,"div",6)(43,"label",18),e._uU(44,"Nombre "),e.qZA(),e.TgZ(45,"div",19)(46,"span",20),e._UZ(47,"i",21),e.qZA(),e._UZ(48,"input",22),e.qZA()()(),e.TgZ(49,"div",17)(50,"div",6)(51,"label",18),e._uU(52,"Area "),e.qZA(),e.TgZ(53,"div",19)(54,"span",20),e._UZ(55,"i",21),e.qZA(),e._UZ(56,"p-dropdown",23),e.qZA()()(),e.TgZ(57,"div",28)(58,"button",29),e.NdJ("click",function(){return r.handleEdit()}),e.qZA(),e.TgZ(59,"button",26),e.NdJ("click",function(){return r.closeDisplayFormEdit()}),e.qZA()()()()(),e._UZ(60,"p-toast")),2&t&&(e.xp6(8),e.Q6J("value",r.subAreas)("selection",r.itemsBulkDelete)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(46,X))("loading",r.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",e.DdM(47,ee)),e.xp6(6),e.Akn(e.VKq(48,P,r.width)),e.Q6J("visible",r.displayFormCreate)("showHeader",!0)("modal",!0)("dismissableMask",!1),e.xp6(1),e.Q6J("description",r.inforCardDescriptionCreate),e.xp6(1),e.Q6J("formGroup",r.formCreate),e.xp6(4),e.Akn(e.DdM(50,I)),e.xp6(5),e.Akn(e.DdM(51,y)),e.xp6(3),e.Akn(e.DdM(52,I)),e.xp6(5),e.Akn(e.DdM(53,y)),e.Q6J("options",r.areas),e.xp6(2),e.Q6J("disabled",!r.formCreate.valid),e.xp6(2),e.Akn(e.VKq(54,P,r.width)),e.Q6J("visible",r.displayFormEdit)("showHeader",!0)("modal",!0)("dismissableMask",!1),e.xp6(1),e.Q6J("description",r.inforCardDescriptionEdit),e.xp6(1),e.Q6J("formGroup",r.formEdit),e.xp6(4),e.Akn(e.DdM(56,I)),e.xp6(5),e.Akn(e.DdM(57,te)),e.xp6(3),e.Akn(e.DdM(58,I)),e.xp6(5),e.Akn(e.DdM(59,y)),e.Q6J("options",r.areas),e.xp6(2),e.Q6J("disabled",!r.formEdit.valid))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Z.o,f.Hq,A.FN,d.jx,l.iA,l.lQ,l.fz,l.UA,l.Mo,l.xl,T.V,E.P,S.Lt,x.Z,j.A,Y.t],styles:["[_nghost-%COMP%]     .p-datatable-header{background-color:#f16357;border:1px solid #f16357}"]}),i})()}];let ie=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(re),c.Bz]}),i})();var ae=o(4466);let se=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,ie,p.u5,p.UX,Z.j,f.hJ,A.EV,l.U$,T.S,E.n,S.kW,x.d,ae.m]}),i})()}}]);