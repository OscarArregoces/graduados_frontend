"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[802],{6802:(V,u,o)=>{o.r(u),o.d(u,{GeneroModule:()=>Q});var G=o(6895),g=o(2496),a=o(433),c=o(262),_=o(9050),E=o(2340),e=o(8274),x=o(7180),m=o(805),k=o(1967),F=o(9219),D=o(6474),h=o(1740),f=o(5593),v=o(2453),d=o(8396),b=o(1493),y=o(369),C=o(4247);const U=function(){return{display:"flex","justify-content":"space-between"}},S=function(){return{"font-size":"20px"}},Z=function(){return{width:"100%"}};function I(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",16)(2,"div",28),e._uU(3," Lista de Generos "),e.qZA(),e.TgZ(4,"div",29)(5,"span",30),e._UZ(6,"i",31),e.TgZ(7,"input",32),e.NdJ("input",function(r){e.CHM(t);const l=e.oxw(),p=e.MAs(10);return e.KtG(p.filterGlobal(l.getEventValue(r),"contains"))}),e.qZA()()()()()}2&n&&(e.xp6(1),e.Akn(e.DdM(8,U)),e.xp6(1),e.Akn(e.DdM(9,S)),e.xp6(3),e.Akn(e.DdM(10,Z)),e.xp6(2),e.Akn(e.DdM(11,Z)))}function J(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",33),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",34)(4,"p"),e._uU(5,"Indice"),e.qZA()(),e.TgZ(6,"th",35)(7,"div",36),e._uU(8," Nombre "),e._UZ(9,"p-sortIcon",37)(10,"p-columnFilter",38),e.qZA()(),e.TgZ(11,"th",39),e._uU(12," Editar "),e.qZA(),e.TgZ(13,"th",39),e._uU(14," Eliminar "),e.qZA()())}function N(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr",40)(1,"td"),e._UZ(2,"p-tableCheckbox",41),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"span",42),e._uU(7,"Tipo"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td",43)(10,"button",44),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.changeDisplayFormEdit(l))}),e.qZA()(),e.TgZ(11,"td",43),e._UZ(12,"p-confirmPopup"),e.TgZ(13,"button",45),e.NdJ("click",function(r){const p=e.CHM(t).$implicit,Y=e.oxw();return e.KtG(Y.confirm(r,p.id))}),e.qZA()()()}if(2&n){const t=s.$implicit,i=s.rowIndex;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.hij(" ",i+1," "),e.xp6(4),e.hij(" ",t.name," ")}}function M(n,s){1&n&&(e.TgZ(0,"tr")(1,"td",46),e._uU(2,"No hay datos que mostrar"),e.qZA()())}const P=function(){return[10,25,50]},H=function(){return["tipo"]},T=function(n){return{width:n,"text-aling":"center","min-height":"70vh"}},A=function(){return{"font-weight":"bold"}},w=[{path:"gestionar",component:(()=>{class n{constructor(t,i,r,l,p){this.adminService=t,this.messageService=i,this.pantallaService=r,this.confirmationService=l,this.fb=p,this.API_URI=E.N.API_URI,this.displayFormCreate=!1,this.displayFormEdit=!1,this.loading=!1,this.itemsBulkDelete=[],this.generos=[],this.generosVerificated=[],this.bulkDelete=[],this.idFormEdit="",this.inforCardDescription="\n  Nuestro m\xf3dulo de Gesti\xf3n de G\xe9neros es una herramienta esencial en nuestro software, dise\xf1ada para facilitar la administraci\xf3n de los tipos de g\xe9neros asociados al sexo de nuestros usuarios. Proporciona una experiencia de usuario inclusiva y personalizada, permitiendo a los usuarios seleccionar con precisi\xf3n su identidad de g\xe9nero al registrarse en nuestra plataforma. Simplifica la gesti\xf3n de esta informaci\xf3n sensible, garantizando un ambiente respetuoso y acogedor para todos nuestros usuarios.\n  ",this.inforCardDescriptionCreate="\n  Facilita la incorporaci\xf3n de nuevos g\xe9neros a nuestra plataforma con facilidad. Permite a los usuarios definir su identidad de g\xe9nero de manera precisa durante el registro, contribuyendo as\xed a una experiencia inclusiva y respetuosa.\n  ",this.inforCardDescriptionEdit="\n  Mant\xe9n tu informaci\xf3n de g\xe9nero siempre actualizada con nuestra funci\xf3n de actualizaci\xf3n de g\xe9neros. Proporciona a los usuarios la flexibilidad de ajustar su identidad de g\xe9nero seg\xfan sea necesario, asegurando un entorno que refleje con precisi\xf3n su identidad y que sea acogedor para todos.\n  ",this.formCreate=this.fb.group({name:["",[a.kI.required,a.kI.minLength(4),a.kI.maxLength(50)]]}),this.formEdit=this.fb.group({name:["",[a.kI.required,a.kI.minLength(4),a.kI.maxLength(50)]]}),this.variantColor=_.$.Blue}ngOnInit(){this.token=localStorage.getItem("token"),this.traerGeneros();const[t]=this.pantallaService.calcularEspacioPantalla();this.subscription$=t.subscribe(i=>this.width=i)}ngOnDestroy(){this.subscription$.unsubscribe()}onSubmit(){if(this.generosVerificated.includes(this.formEdit.value.name.toLowerCase().replace(/\s+/g,"")))return this.messageService.add({severity:"error",summary:"Error",detail:"Ya existe"});this.adminService.post(`${this.API_URI}/genders/create/`,this.formCreate.value,this.token).pipe((0,c.K)(t=>{throw this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema"}),t})).subscribe(t=>{this.formCreate.reset(),this.traerGeneros(),this.changeDisplayFormCreate(),this.messageService.add({severity:"success",summary:"Notififaci\xf3n",detail:"Creado correctamente"})})}handleEdit(){if(this.generosVerificated.includes(this.formEdit.value.name.toLowerCase().replace(/\s+/g,"")))return this.messageService.add({severity:"error",summary:"Error",detail:"Ya existe"});this.adminService.put(`${this.API_URI}/genders/update/${this.idFormEdit}/`,this.formEdit.value,this.token).pipe((0,c.K)(t=>{throw this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema"}),t})).subscribe(t=>(this.formEdit.reset(),this.traerGeneros(),this.messageService.add({severity:"success",summary:"Notififaci\xf3n",detail:"Actualizado correctamente"})))}deleteAll(){const t=this.itemsBulkDelete.map(r=>r.id);if(0===t.length)return this.messageService.add({severity:"error",summary:"Notififaci\xf3n",detail:"Debes seleccionar al menos un registro"});this.adminService.delete(`${this.API_URI}/genders/delete/`,this.token,{ids:t}).pipe((0,c.K)(r=>{throw this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema"}),r})).subscribe(r=>{this.traerGeneros(),this.itemsBulkDelete=[],this.messageService.add({severity:"success",summary:"Notififaci\xf3n",detail:"Eliminado correctamente"})})}changeDisplayFormCreate(){this.displayFormCreate=!this.displayFormCreate}closeDisplayFormCreate(){this.displayFormCreate=!1,this.formCreate.reset()}changeDisplayFormEdit(t={}){this.formEdit.patchValue(t),this.displayFormEdit=!this.displayFormEdit,this.idFormEdit=t.id}closeDisplayFormEdit(){this.displayFormEdit=!1,this.formEdit.reset()}traerGeneros(){this.generos=[],this.generosVerificated=[];try{this.adminService.get(`${this.API_URI}/genders`,this.token).subscribe(t=>{this.generos=t.data,t.data.map(i=>this.generosVerificated.push(i.name))})}catch(t){console.log("Error en consulta",t)}}getEventValue(t){return t.target.value}confirm(t,i){console.log("Confir called"),this.confirmationService.confirm({target:t.target,message:"\xbfSeguro que desea eliminar este genero?",icon:"pi pi-exclamation-triangle",accept:()=>{this.adminService.delete(`${this.API_URI}/poll/momentos/delete/${i}/`,this.token).pipe((0,c.K)(r=>{throw this.messageService.add({severity:"error",summary:"Error",detail:"Hubo un problema"}),r})).subscribe(r=>(this.traerGeneros(),this.messageService.add({severity:"success",summary:"Notififaci\xf3n",detail:"Eliminado correctamente !!!"})))},reject:()=>{}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.l),e.Y36(m.ez),e.Y36(k.c),e.Y36(m.YP),e.Y36(a.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gestionar"]],decls:46,vars:41,consts:[["titulo","Gestionar Generos"],["card-body","",1,"grid"],[3,"description"],[1,"col-12"],["pButton","","pRipple","","type","submit","icon","pi pi-plus","label","Crear Genero",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","submit","label"," Eliminar seleccionados","icon","pi pi-trash",1,"p-button-danger","mr-2",3,"click"],[1,"col-12","md:col-12","lg:col-12"],[1,"flex","flex-column","gap-2"],["dataKey","id","styleClass","p-datatable-customers","responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} elementos","responsiveLayout","scroll",3,"value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","filterDelay","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Creando Genero",3,"visible","showHeader","modal","dismissableMask","visibleChange","onHide"],[3,"formGroup"],[1,"grid"],[1,"mb-2"],[1,"p-inputgroup","my-1"],[1,"p-inputgroup-addon"],[1,"pi","pi-bookmark-fill",2,"color","#f16357"],["type","text","placeholder","Escribe aqui...","formControlName","name","pInputText",""],[1,"col-12","flex","justify-content-center","align-items-center"],["pButton","","pRipple","","type","submit","label","Guardar","icon","pi pi-save",1,"p-button-success","mx-5",3,"disabled","click"],["pButton","","pRipple","","type","button","label","Cancelar",1,"p-button-outlined","p-button-danger","mx-5",3,"click"],["header","Actualizando Genero",3,"visible","showHeader","modal","dismissableMask","visibleChange","onHide"],["pButton","","pRipple","","type","submit","label","Actualizar","icon","pi pi-save",1,"p-button-warning","mx-5",3,"disabled","click"],[1,"table-header"],[1,"col-12","md:col-6","lg:col-6"],[1,"col-12","md:col-6","lg:col-3"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Busqueda global",3,"input"],[2,"width","3rem"],[2,"width","5rem"],["pSortableColumn","tipo"],[1,"flex","justify-content-between","align-items-center"],["field","tipo"],["type","text","field","tipo","display","menu",1,"ml-auto"],[2,"width","8rem","text-align","center"],[1,"p-selectable-row"],[3,"value"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-warning",3,"click"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-danger",3,"click"],["colspan","8"]],template:function(t,i){1&t&&(e.TgZ(0,"app-card",0)(1,"div",1),e._UZ(2,"app-custom-info-card",2),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.changeDisplayFormCreate()}),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return i.deleteAll()}),e.qZA()(),e.TgZ(6,"div",6)(7,"div",7)(8,"p-card")(9,"p-table",8,9),e.NdJ("selectionChange",function(l){return i.itemsBulkDelete=l}),e.YNc(11,I,8,12,"ng-template",10),e.YNc(12,J,15,0,"ng-template",11),e.YNc(13,N,14,3,"ng-template",12),e.YNc(14,M,3,0,"ng-template",13),e.qZA()()()()()(),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(l){return i.displayFormCreate=l})("onHide",function(){return i.closeDisplayFormCreate()}),e._UZ(16,"app-custom-info-card",2),e.TgZ(17,"form",15)(18,"div",16)(19,"div",6)(20,"div",7)(21,"label",17),e._uU(22,"Nombre "),e.qZA(),e.TgZ(23,"div",18)(24,"span",19),e._UZ(25,"i",20),e.qZA(),e._UZ(26,"input",21),e.qZA()()(),e.TgZ(27,"div",22)(28,"button",23),e.NdJ("click",function(){return i.onSubmit()}),e.qZA(),e.TgZ(29,"button",24),e.NdJ("click",function(){return i.closeDisplayFormCreate()}),e.qZA()()()()(),e.TgZ(30,"p-dialog",25),e.NdJ("visibleChange",function(l){return i.displayFormEdit=l})("onHide",function(){return i.closeDisplayFormEdit()}),e._UZ(31,"app-custom-info-card",2),e.TgZ(32,"form",15)(33,"div",16)(34,"div",6)(35,"div",7)(36,"label",17),e._uU(37,"Nombre "),e.qZA(),e.TgZ(38,"div",18)(39,"span",19),e._UZ(40,"i",20),e.qZA(),e._UZ(41,"input",21),e.qZA()()(),e.TgZ(42,"div",22)(43,"button",26),e.NdJ("click",function(){return i.handleEdit()}),e.qZA(),e.TgZ(44,"button",24),e.NdJ("click",function(){return i.closeDisplayFormEdit()}),e.qZA()()()()(),e._UZ(45,"p-toast")),2&t&&(e.xp6(2),e.Q6J("description",i.inforCardDescription),e.xp6(7),e.Q6J("value",i.generos)("selection",i.itemsBulkDelete)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(33,P))("loading",i.loading)("paginator",!0)("filterDelay",0)("globalFilterFields",e.DdM(34,H)),e.xp6(6),e.Akn(e.VKq(35,T,i.width)),e.Q6J("visible",i.displayFormCreate)("showHeader",!0)("modal",!0)("dismissableMask",!1),e.xp6(1),e.Q6J("description",i.inforCardDescriptionCreate),e.xp6(1),e.Q6J("formGroup",i.formCreate),e.xp6(4),e.Akn(e.DdM(37,A)),e.xp6(7),e.Q6J("disabled",!i.formCreate.valid),e.xp6(2),e.Akn(e.VKq(38,T,i.width)),e.Q6J("visible",i.displayFormEdit)("showHeader",!0)("modal",!0)("dismissableMask",!1),e.xp6(1),e.Q6J("description",i.inforCardDescriptionEdit),e.xp6(1),e.Q6J("formGroup",i.formEdit),e.xp6(4),e.Akn(e.DdM(40,A)),e.xp6(7),e.Q6J("disabled",!i.formEdit.valid))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,F.A,D.t,h.o,f.Hq,v.FN,m.jx,d.iA,d.lQ,d.fz,d.UA,d.Mo,d.xl,b.V,y.P,C.Z],styles:["[_nghost-%COMP%]     .p-datatable-header{background-color:#f16357;border:1px solid #f16357}"]}),n})()}];let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(w),g.Bz]}),n})();var B=o(4466),$=o(2210),j=o(3054),q=o(1989),z=o(613);let Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[G.ez,a.u5,a.UX,R,B.m,h.j,f.hJ,v.EV,d.U$,b.S,$.kW,y.n,j.A,q.nD,z.cc,C.d]}),n})()}}]);