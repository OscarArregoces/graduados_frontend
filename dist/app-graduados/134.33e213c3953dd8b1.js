"use strict";(self.webpackChunkAppTuristica=self.webpackChunkAppTuristica||[]).push([[134],{7134:(X,Z,n)=>{n.r(Z),n.d(Z,{DatosPersonalesModule:()=>V});var x=n(6895),a=n(433),y=n(1933),N=n(8625),D=n(2802),J=n(2340),t=n(8274),d=n(529);let q=(()=>{class o{constructor(e){this.http=e}get(e,i){let r={headers:new d.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`})};return this.http.get(e,r)}post(e,i,r){let l={headers:new d.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`})};return this.http.post(e,i,l)}put(e,i,r){let l={headers:new d.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`})};return this.http.put(e,i,l)}delete(e,i,r){let l={headers:new d.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`}),body:r};return this.http.delete(e,l)}convertirFecha(e){const i=e.getDate(),r=e.getMonth()+1;return`${e.getFullYear()}-${r}-${i}`}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var P=n(1967),T=n(805),O=n(9219),$=n(2925),F=n(2709),I=n(5593),U=n(1740),C=n(2453),b=n(8271),M=n(2210),k=n(585),z=n(3520);function L(o,s){if(1&o&&(t.TgZ(0,"div",30)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.selectedCountry.name)}}function Q(o,s){if(1&o&&t.YNc(0,L,3,1,"div",29),2&o){const e=t.oxw(2);t.Q6J("ngIf",e.selectedCountry)}}function _(o,s){if(1&o&&(t.TgZ(0,"div",31)(1,"div"),t._uU(2),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.name)}}const j=function(){return{width:"300px",height:"300px",border:"1px solid #f16357"}},p=function(){return{"font-weight":"bold"}},c=function(){return{width:"100%"}};function E(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-card",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),t._UZ(6,"p-avatar",8),t.qZA(),t.TgZ(7,"div",9)(8,"div",10)(9,"label",11),t._uU(10,"Nombres "),t.qZA(),t.TgZ(11,"div",12)(12,"span",13),t._UZ(13,"i",14),t.qZA(),t._UZ(14,"input",15),t.qZA()(),t.TgZ(15,"div",10)(16,"label",11),t._uU(17,"Apellidos "),t.qZA(),t.TgZ(18,"div",12)(19,"span",13),t._UZ(20,"i",14),t.qZA(),t._UZ(21,"input",16),t.qZA()(),t.TgZ(22,"div",10)(23,"label",11),t._uU(24,"Fecha de nacimiento "),t.qZA(),t.TgZ(25,"div",12)(26,"span",13),t._UZ(27,"i",14),t.qZA(),t._UZ(28,"p-calendar",17),t.qZA()()()()(),t.TgZ(29,"div",5)(30,"div",4)(31,"div",9)(32,"div",10)(33,"label",11),t._uU(34,"Nacionalidad "),t.qZA(),t.TgZ(35,"div",12)(36,"span",13),t._UZ(37,"i",18),t.qZA(),t.TgZ(38,"p-dropdown",19),t.YNc(39,Q,1,1,"ng-template",20),t.YNc(40,_,3,1,"ng-template",21),t.qZA()()(),t.TgZ(41,"div",10)(42,"label",11),t._uU(43,"Sexo "),t.qZA(),t.TgZ(44,"div",12)(45,"span",13),t._UZ(46,"i",18),t.qZA(),t._UZ(47,"p-dropdown",22),t.qZA()(),t.TgZ(48,"div",10)(49,"label",11),t._uU(50,"Telefono "),t.qZA(),t.TgZ(51,"div",12)(52,"span",13),t._UZ(53,"i",18),t.qZA(),t._UZ(54,"p-inputMask",23),t.qZA()()(),t.TgZ(55,"div",9)(56,"div",10)(57,"label",11),t._uU(58,"Direcci\xf3n "),t.qZA(),t.TgZ(59,"div",12)(60,"span",13),t._UZ(61,"i",18),t.qZA(),t._UZ(62,"input",24),t.qZA()(),t.TgZ(63,"div",10)(64,"label",11),t._uU(65,"Tipo de documento "),t.qZA(),t.TgZ(66,"div",12)(67,"span",13),t._UZ(68,"i",14),t.qZA(),t._UZ(69,"p-dropdown",25),t.qZA()(),t.TgZ(70,"div",10)(71,"label",11),t._uU(72,"No. Documento "),t.qZA(),t.TgZ(73,"div",12)(74,"span",13),t._UZ(75,"i",14),t.qZA(),t._UZ(76,"input",26),t.qZA()()()()(),t.TgZ(77,"div",27)(78,"button",28),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSubmit())}),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(5),t.Akn(t.DdM(45,j)),t.xp6(3),t.Akn(t.DdM(46,p)),t.xp6(5),t.Akn(t.DdM(47,c)),t.Q6J("maxlength",150),t.xp6(2),t.Akn(t.DdM(48,p)),t.xp6(5),t.Akn(t.DdM(49,c)),t.Q6J("maxlength",150),t.xp6(2),t.Akn(t.DdM(50,p)),t.xp6(5),t.Akn(t.DdM(51,c)),t.xp6(5),t.Akn(t.DdM(52,p)),t.xp6(5),t.Akn(t.DdM(53,c)),t.Q6J("options",e.paises)("filter",!0)("showClear",!0)("maxlength",100),t.xp6(4),t.Akn(t.DdM(54,p)),t.xp6(5),t.Akn(t.DdM(55,c)),t.Q6J("options",e.generos),t.xp6(2),t.Akn(t.DdM(56,p)),t.xp6(5),t.Q6J("maxlength",13),t.xp6(3),t.Akn(t.DdM(57,p)),t.xp6(5),t.Q6J("maxlength",50),t.xp6(2),t.Akn(t.DdM(58,p)),t.xp6(5),t.Akn(t.DdM(59,c)),t.Q6J("options",e.tiposDocumento),t.xp6(2),t.Akn(t.DdM(60,p)),t.xp6(5),t.Q6J("maxlength",40),t.xp6(2),t.Q6J("disabled",!e.form.valid)}}function Y(o,s){1&o&&t._UZ(0,"app-spinner")}const B=[{path:"actualizar-datos",component:(()=>{class o{constructor(e,i,r,l){this.inicioService=e,this.pantallaService=i,this.fb=r,this.messageService=l,this.API_URI=J.N.API_URI,this.paises=[],this.generos=[],this.tiposDocumento=[],this.infoUsuario=[],this.form=this.fb.group({document_type:["",a.kI.required],gender_type:[""],name:["",[a.kI.required,a.kI.maxLength(150)]],surname:["",[a.kI.required,a.kI.maxLength(150)]],identification:["",[a.kI.required,a.kI.maxLength(40)]],address:["",[a.kI.required,a.kI.maxLength(50)]],nationality:["",a.kI.maxLength(100)],date_of_birth:["",a.kI.required],phone:["",a.kI.maxLength(13)]})}ngOnInit(){this.token=localStorage.getItem("token"),this.paises=N.p,this.traerInfoUsuario(),this.traerGeneros(),this.traerTiposDocumento();const[e]=this.pantallaService.calcularEspacioPantalla();this.subscription$=e.subscribe(i=>this.width=i)}ngOnDestroy(){this.subscription$.unsubscribe()}onSubmit(){const{document_type:e,gender_type:i,name:r,surname:l,identification:m,address:h,nationality:g,date_of_birth:f,phone:v}=this.form.value,A=(0,D.I)(f);let u={document_type:e.id,gender_type:i.id,name:r,surname:l,identification:m,address:h,nationality:JSON.stringify(g),date_of_birth:A,phone:v};try{this.inicioService.put(`${this.API_URI}/persons/update/profile/`,u,this.token).subscribe(S=>{this.messageService.add({severity:"success",summary:"Notififaci\xf3n",detail:"Datos Actualizados"})})}catch(S){console.log("Error en consulta",S),this.messageService.add({severity:"error",summary:"Error",detail:"Error en consulta "})}}traerInfoUsuario(){this.infoUsuario=[];try{this.inicioService.get(`${this.API_URI}/persons`,this.token).subscribe(e=>{this.infoUsuario=e.data;const{document_type:i,gender_type:r,name:l,surname:m,identification:h,address:g,nationality:f,date_of_birth:v,phone:A}=e.data;let u={document_type:i,gender_type:r,name:l,surname:m,identification:h,address:g,nationality:JSON.parse(f),date_of_birth:v,phone:A.replace(/\s+/g,"")};console.log(u),this.form.patchValue({...u,date_of_birth:(0,D.L)(u.date_of_birth)})})}catch(e){console.log("Error en consulta",e)}}traerGeneros(){try{this.inicioService.get(`${this.API_URI}/genders`,this.token).subscribe(e=>{this.generos=e.data})}catch(e){console.log("Error en consulta",e)}}traerTiposDocumento(){try{this.inicioService.get(`${this.API_URI}/documents`,this.token).subscribe(e=>{this.tiposDocumento=e.data})}catch(e){console.log("Error en consulta",e)}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(q),t.Y36(P.c),t.Y36(a.QS),t.Y36(T.ez))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-actualizar-datos"]],decls:4,vars:2,consts:[["titulo","Actualizar datos",4,"ngIf","ngIfElse"],["elseBlock",""],["titulo","Actualizar datos"],["card-body","",3,"formGroup"],[1,"grid"],[1,"col-12","md:col-12","lg:col-12"],[1,"grid","flex","align-items-center"],[1,"col-12","md:col-6","lg:col-6","flex","justify-content-center"],["appImgError","","image","assets/images/avatar/avatar_1.png","shape","circle"],[1,"col-12","md:col-6","lg:col-6"],[1,"flex","flex-column","gap-2"],[1,"mb-2"],[1,"p-inputgroup","my-1"],[1,"p-inputgroup-addon"],[1,"pi","pi-bookmark-fill",2,"color","#f16357"],["type","text","pInputText","","formControlName","name",3,"maxlength"],["type","text","pInputText","","formControlName","surname",3,"maxlength"],["placeholder","Seleccione la fecha","formControlName","date_of_birth","dateFormat","mm-dd-yy"],[1,"pi","pi-bookmark-fill"],["formControlName","nationality","optionLabel","name","filterBy","name","placeholder","Selecciona un pais",3,"options","filter","showClear","maxlength"],["pTemplate","selectedCountry"],["pTemplate","item"],["placeholder","Selecciona una opcion","optionLabel","name","formControlName","gender_type",3,"options"],["mask","999 999 9999","placeholder","300 200 1000","formControlName","phone",3,"maxlength"],["type","text","pInputText","","formControlName","address",3,"maxlength"],["placeholder","Selecciona una opcion","optionLabel","name","formControlName","document_type",3,"options"],["type","text","pInputText","","formControlName","identification",3,"maxlength"],[1,"col-12","md:col-12","lg:col-12","flex","justify-content-center"],["pButton","","pRipple","","type","button","label","Guardar cambios","icon","pi pi-check",1,"p-button-success",3,"disabled","click"],["class","country-item country-item-value",4,"ngIf"],[1,"country-item","country-item-value"],[1,"country-item"]],template:function(e,i){if(1&e&&(t.YNc(0,E,79,61,"app-card",0),t.YNc(1,Y,1,0,"ng-template",null,1,t.W1O),t._UZ(3,"p-toast")),2&e){const r=t.MAs(2);t.Q6J("ngIf",i.infoUsuario)("ngIfElse",r)}},dependencies:[x.O5,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.sg,a.u,O.A,$.O,F.j,I.Hq,T.jx,U.o,C.FN,b.q,M.Lt,k.f,z.vy],styles:["[_nghost-%COMP%]     .p-dropdown-filter-container{.p-dropdown-filter {width: 100%;}}[_nghost-%COMP%]     p-inputmask{width:100%;.p-inputmask.p-element {width: 100%;}}"]}),o})()}];let R=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[y.Bz.forChild(B),y.Bz]}),o})();var G=n(4466),W=n(4247),w=n(1493),H=n(5047);let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.ez,a.u5,a.UX,R,G.m,I.hJ,W.d,U.j,C.EV,w.S,b.F,M.kW,k._8,H.L$,z.zz]}),o})()}}]);