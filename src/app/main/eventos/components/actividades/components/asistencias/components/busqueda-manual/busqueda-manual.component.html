<app-card titulo="Asistencia Manual" width="95%">
    <div card-body>
        <div class="grid">
            <app-custom-info-card [description]="inforCardDescription"></app-custom-info-card>
            <div class="col-12 flex justify-content-between align-items-center">
                <button pButton pRipple type="button" label="Volver" (click)="handleClickVolver()"
                    class="p-button-outlined p-button-secondary"></button>
            </div>
            <div class="col-12">
                <form [formGroup]="formActividad" style="background-color: #f5f4f2;" class="p-3 mt-3">
                    <div class="
                flex flex-column justify-content-center align-items-start gap-0
                md:flex md:flex-row md:justify-content-center md:align-items-center md:gap-5
                lg:flex lg:flex-row lg:justify-content-center lg:align-items-center lg:gap-5
                ">
                        <div class="w-full">
                            <div class="p-inputgroup my-1">
                                <span class="p-inputgroup-addon" style="color:#f16357;"><i
                                        class="pi pi-filter-fill"></i></span>
                                <input type="number" style="width: 100%;" placeholder="ID Actividad"
                                    formControlName="id_actividad" pInputText [maxlength]="100" />
                            </div>
                        </div>
                        <button pButton pRipple type="submit" icon="pi pi-search" label="Buscar"
                            class="p-button-raised p-button-secondary" (click)="handleSearchActividad()"></button>
                    </div>
                    <div *ngIf="formActividad.get('id_actividad')?.hasError('required') && formActividad.get('id_actividad')?.touched"
                        class="text-red-500 my-1 text-left">
                        Ingresa el No. de Actividad
                    </div>
                </form>
            </div>

            <div class="col-12 my-2" *ngIf="actividad">
                <div id="card-custom">
                    <div id="card-header">
                        <div class="p-inputgroup flex justify-content-start align-items-center">
                            <span style="background-color: #357b89; border:1px solid #357b89; color: white;"
                                class="p-inputgroup-addon">
                                <i class="pi pi-book"></i>
                            </span>
                            <span class="text-white font-bold">
                                {{actividad.nombre_actividad}}
                            </span>
                        </div>
                    </div>
                    <div class="grid p-2">
                        <div class="col-12 flex justify-content-between align-items-center">
                            <div class="flex flex-column justify-content-center align-items-start">
                                <label class="customLabel">Tipo Actividad</label>
                                <span class="customText">
                                    {{actividad.tipo_actividad.name}}
                                </span>
                            </div>
                            <div class="flex flex-column justify-content-center align-items-start">
                                <label class="customLabel">Modalidad</label>
                                <span class="customText">
                                    {{actividad.modalidad}}
                                </span>
                            </div>
                            <div class="flex flex-column justify-content-center align-items-start">
                                <label class="customLabel">Sede</label>
                                <span class="customText">
                                    <span class="customText">
                                        {{actividad.sede.name}}
                                    </span>
                                </span>
                            </div>
                            <div class="flex flex-column justify-content-center align-items-start">
                                <label class="customLabel">Fecha Inicio</label>
                                <span class="customText">
                                    {{actividad.fecha_inicio | date:"MMMM dd, yyyy hh:mm a" | titlecase }}
                                </span>
                            </div>
                            <div class="flex flex-column justify-content-center align-items-start">
                                <label class="customLabel">Fecha Final</label>
                                <span class="customText">
                                    {{actividad.fecha_final | date:"MMMM dd, yyyy hh:mm a" | titlecase }}
                                </span>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="col-12" style="background-color: #f5f5f5;" *ngIf="actividad" s>
                <div class="grid">
                    <div class="col-6 border-right-1 border-gray-100">
                        <p class="customTitle text-center">Busqueda</p>
                        <form [formGroup]="formUser" style="background-color: #f5f4f2;" class="p-3 mt-3">
                            <div class="
                        flex flex-column justify-content-center align-items-start gap-0
                        md:flex md:flex-row md:justify-content-center md:align-items-center md:gap-5
                        lg:flex lg:flex-row lg:justify-content-center lg:align-items-center lg:gap-5
                        ">
                                <div class="w-full">
                                    <div class="p-inputgroup my-1">
                                        <span class="p-inputgroup-addon"><i class="pi pi-filter-fill"></i></span>
                                        <input type="number" style="width: 100%;" placeholder="No. Documento"
                                            formControlName="document" pInputText [maxlength]="100" />
                                    </div>
                                </div>
                                <button pButton pRipple type="submit" icon="pi pi-search" label="Buscar"
                                    class="p-button-raised p-button-secondary" (click)="onSubmitSearchUser()"></button>
                            </div>
                            <div *ngIf="formUser.get('document')?.hasError('required') && formUser.get('document')?.touched"
                                class="text-red-500 my-1 text-left">
                                Ingresa el No. de Actividad
                            </div>
                        </form>
                        <div class="col-12 my-2" *ngIf="persona">
                            <div id="card-custom" style="background-color: white;">
                                <div id="card-header">
                                    <div class="p-inputgroup flex justify-content-start align-items-center">
                                        <span style="background-color: #357b89; border:1px solid #357b89; color: white;"
                                            class="p-inputgroup-addon">
                                            <i class="pi pi-id-card"></i>
                                        </span>
                                        <span class="text-white font-bold">
                                            {{ persona.graduado ? "Graduado" : "Administrativo"}}
                                        </span>
                                    </div>
                                </div>
                                <div class="m-1 p-2" style="background-color: #f5f4f2;" *ngIf="persona.fullname">
                                    <label class="customLabel" style="color: #535050;">Nombre</label>
                                    <p class="p-0 m-0 text-gray-700">{{persona.fullname}}</p>
                                </div>
                                <div class="m-1 p-2" style="background-color: #f5f4f2;" *ngIf="persona.email">
                                    <label class="customLabel" style="color: #535050;">Correo</label>
                                    <p class="p-0 m-0 text-gray-700">{{persona.email}}</p>
                                </div>
                                <div class="m-1 p-2" style="background-color: #f5f4f2;" *ngIf="persona.phone">
                                    <label class="customLabel" style="color: #535050;">Celular</label>
                                    <p class="p-0 m-0 text-gray-700">{{persona.phone}}</p>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 flex justify-content-center aling-items-center" *ngIf="persona">
                            <button pButton pRipple type="submit" label="Registrar Asistencia" class="p-button"
                                (click)="onSubmitAsistenciaBusqueda()"></button>
                        </div>

                    </div>
                    <div class="col-6 border-left-1 border-gray-100">
                        <p class="customTitle text-center">Externo</p>
                        <form [formGroup]="formExterno">
                            <div class="grid">
                                <div class="col-12 md:col-12 lg:col-12">
                                    <div class="flex flex-column gap-2">
                                        <label class="customLabel">Nombres y Apellidos</label>
                                        <div class="p-inputgroup">
                                            <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                                            <input type="text" [maxlength]="200" pInputText formControlName="fullname"
                                                placeholder="Nombre compleo" />
                                        </div>
                                        <div *ngIf="formExterno.get('fullname')?.hasError('required') && formExterno.get('fullname')?.touched"
                                            class="text-red-500 my-1 text-left">
                                            Campo requerido
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 md:col-6 lg:col-6">
                                    <div class="flex flex-column gap-2">
                                        <label class="customLabel">Correo</label>
                                        <div class="p-inputgroup">
                                            <span class="p-inputgroup-addon"><i class="pi pi-at"></i></span>
                                            <input type="email" [maxlength]="100" pInputText formControlName="email"
                                                placeholder="Ejemplo: usuario@gmail.com" />
                                        </div>
                                        <div *ngIf="formExterno.get('email')?.hasError('required') && formExterno.get('email')?.touched"
                                            class="text-red-500 my-1 text-left">
                                            Campo requerido
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 md:col-6 lg:col-6">
                                    <div class="flex flex-column gap-2">
                                        <label class="customLabel">Telefono</label>
                                        <div class="p-inputgroup">
                                            <span class="p-inputgroup-addon"><i class="pi pi-phone"></i></span>
                                            <input type="number" [maxlength]="30" pInputText formControlName="phone"
                                                placeholder="(000) 000-0000" />
                                        </div>
                                        <div *ngIf="formExterno.get('phone')?.hasError('required') && formExterno.get('phone')?.touched"
                                            class="text-red-500 my-1 text-left">
                                            Campo requerido
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 md:col-6 lg:col-6">
                                    <div class="flex flex-column gap-2">
                                        <label class="customLabel">No. Documento</label>
                                        <div class="p-inputgroup">
                                            <span class="p-inputgroup-addon"><i class="pi pi-id-card"></i></span>
                                            <input type="number" [maxlength]="30" pInputText
                                                formControlName="document" placeholder="Escribe aqui..." />
                                        </div>
                                        <div *ngIf="formExterno.get('document')?.hasError('required') && formExterno.get('document')?.touched"
                                            class="text-red-500 my-1 text-left">
                                            Campo requerido
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 md:col-6 lg:col-6">
                                    <div class="flex flex-column gap-2">
                                        <label class="customLabel">Vinculación</label>
                                        <div class="p-inputgroup">
                                            <span class="p-inputgroup-addon"><i class="pi pi-tag"></i></span>
                                            <p-dropdown [style]="{'width':'100%'}" [options]="tipoVinculacion"
                                                placeholder="Selecciona una opcion"
                                                formControlName="vinculacion"></p-dropdown>
                                        </div>
                                        <div *ngIf="formExterno.get('vinculacion')?.hasError('required') && formExterno.get('vinculacion')?.touched"
                                            class="text-red-500 my-1 text-left">
                                            Campo requerido
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="flex justify-content-center aling-items-center my-3">
                                        <button pButton pRipple type="submit" label="Registrar Asistencia"
                                            class="p-button" (click)="onSubmitAsistenciaExterno()"></button>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

</app-card>